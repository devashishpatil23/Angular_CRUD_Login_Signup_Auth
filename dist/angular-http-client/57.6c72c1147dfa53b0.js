"use strict";(self.webpackChunkangular_http_client=self.webpackChunkangular_http_client||[]).push([[57],{9057:(N,m,a)=>{a.r(m),a.d(m,{DashBoardModule:()=>J});var u=a(6814),f=a(3609),g=a(2895),t=a(4946),h=a(9862),T=a(8645),_=a(7398),d=a(6306),p=a(8504);let b=(()=>{class r{constructor(){this.http=(0,t.f3M)(h.eN)}logError(e){this.http.post("https://angular-crud-28c6e-default-rtdb.firebaseio.com/log.json",e).subscribe()}fetchError(){this.http.get("https://angular-crud-28c6e-default-rtdb.firebaseio.com/log.json").subscribe(e=>{console.log(e)})}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var k=a(9560);let v=(()=>{class r{constructor(){this.http=(0,t.f3M)(h.eN),this.taskUpdated=new T.x,this.errorSubject=new T.x,this.logginService=(0,t.f3M)(b),this.authService=(0,t.f3M)(k.e)}GetAllTasks(){return this.http.get("https://angular-crud-28c6e-default-rtdb.firebaseio.com/tasks.json").pipe((0,_.U)(e=>{const s=[];for(let o in e)e.hasOwnProperty(o)&&s.push({...e[o],id:o});return s}),(0,d.K)(e=>(this.logginService.logError({statusCode:e.status,errroMessage:e.message,datatime:new Date}),this.errorSubject.next(e),(0,p._)(()=>e))))}CreateTask(e){this.http.post("https://angular-crud-28c6e-default-rtdb.firebaseio.com/tasks.json",e).pipe((0,d.K)(s=>(this.logginService.logError({statusCode:s.status,errroMessage:s.message,datatime:new Date}),(0,p._)(()=>{})))).subscribe({next:()=>{this.taskUpdated.next()},error:s=>{this.errorSubject.next(s)}})}UpdateTask(e,s){this.http.put("https://angular-crud-28c6e-default-rtdb.firebaseio.com/tasks/"+e+".json",s).pipe((0,d.K)(o=>(this.logginService.logError({statusCode:o.status,errroMessage:o.message,datatime:new Date}),(0,p._)(()=>{})))).subscribe({next:()=>{this.taskUpdated.next()},error:o=>{this.errorSubject.next(o)}})}DeleteTask(e){let s=new h.WM;s=s.set("content-type","application/json"),this.http.delete("https://angular-crud-28c6e-default-rtdb.firebaseio.com/tasks/"+e+".json",{headers:s}).pipe((0,d.K)(o=>(this.logginService.logError({statusCode:o.status,errroMessage:o.message,datatime:new Date}),(0,p._)(()=>{})))).subscribe({next:()=>{this.taskUpdated.next()},error:o=>{this.errorSubject.next(o)}})}DeleteAllTasks(){this.http.delete("https://angular-crud-28c6e-default-rtdb.firebaseio.com/tasks.json").pipe((0,d.K)(e=>(this.logginService.logError({statusCode:e.status,errroMessage:e.message,datatime:new Date}),(0,p._)(()=>{})))).subscribe({next:()=>{this.taskUpdated.next()},error:e=>{this.errorSubject.next(e)}})}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var C=a(907),Z=a(1511),n=a(95);const x=["taskForm"];let A=(()=>{class r{constructor(){this.isEditMode=!1,this.CloseForm=new t.vpe,this.EmitTaskData=new t.vpe}ngAfterViewInit(){setTimeout(()=>{this.taskForm.form.patchValue(this.selectedTask)},0)}OnCloseForm(){this.CloseForm.emit(!1)}OnFormSubmitted(e){console.log(e.value),this.EmitTaskData.emit(e.value),this.CloseForm.emit(!1)}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-task"]],viewQuery:function(s,o){if(1&s&&t.Gf(x,5),2&s){let i;t.iGM(i=t.CRH())&&(o.taskForm=i.first)}},inputs:{isEditMode:"isEditMode",selectedTask:"selectedTask"},outputs:{CloseForm:"CloseForm",EmitTaskData:"EmitTaskData"},decls:56,vars:3,consts:[[1,"overlay"],[1,"popup","mx-auto","mt-3"],[1,"container"],[1,"mb-3"],[1,"close",3,"click"],[3,"ngSubmit"],["taskForm","ngForm"],[1,"form-group"],["for","inputTitle"],["name","title","ngModel","","type","text","required","","id","inputTitle",1,"form-control"],["for","inputDescription"],["name","description","ngModel","","type","text","rows","4","required","","id","inputDescription",1,"form-control"],[1,"form-row"],[1,"form-group","col-md-6"],["for","inputAssignedTo"],["name","assignedTo","ngModel","","id","inputAssignedTo","type","text",1,"form-control"],[1,"input-box"],["name","createdAt","ngModel","","type","date","required","",1,"p-1"],["required","","name","priority","ngModel","",1,"form-control"],["value","","disabled","","selected",""],["value","low"],["value","medium"],["value","high"],["value","critical"],["required","","name","status","ngModel","",1,"form-control"],["value","open"],["value","started"],["value","in-progress"],["value","complete"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(s,o){if(1&s){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"section",2)(3,"h3",3),t._uU(4),t.qZA(),t.TgZ(5,"a",4),t.NdJ("click",function(){return o.OnCloseForm()}),t._uU(6,"\xd7"),t.qZA(),t.TgZ(7,"form",5,6),t.NdJ("ngSubmit",function(){t.CHM(i);const I=t.MAs(8);return t.KtG(o.OnFormSubmitted(I))}),t.TgZ(9,"div",7)(10,"label",8),t._uU(11,"Title*"),t.qZA(),t._UZ(12,"input",9),t.qZA(),t.TgZ(13,"div",7)(14,"label",10),t._uU(15,"Description "),t.qZA(),t._UZ(16,"textarea",11),t.qZA(),t.TgZ(17,"div",12)(18,"div",13)(19,"label",14),t._uU(20,"Assigned To"),t.qZA(),t._UZ(21,"input",15),t.qZA(),t.TgZ(22,"div",13)(23,"div",16)(24,"label"),t._uU(25,"Created At"),t.qZA(),t._UZ(26,"br")(27,"input",17),t.qZA()()(),t.TgZ(28,"div",12)(29,"div",13)(30,"select",18)(31,"option",19),t._uU(32,"Priority"),t.qZA(),t.TgZ(33,"option",20),t._uU(34,"Low"),t.qZA(),t.TgZ(35,"option",21),t._uU(36,"Medium"),t.qZA(),t.TgZ(37,"option",22),t._uU(38,"High"),t.qZA(),t.TgZ(39,"option",23),t._uU(40,"Critical"),t.qZA()()(),t.TgZ(41,"div",13)(42,"select",24)(43,"option",19),t._uU(44,"Staus"),t.qZA(),t.TgZ(45,"option",25),t._uU(46,"Open"),t.qZA(),t.TgZ(47,"option",26),t._uU(48,"Started"),t.qZA(),t.TgZ(49,"option",27),t._uU(50,"In Progress"),t.qZA(),t.TgZ(51,"option",28),t._uU(52,"Complete"),t.qZA()()()(),t.TgZ(53,"div",29)(54,"button",30),t._uU(55),t.qZA()()()()()()}if(2&s){const i=t.MAs(8);t.xp6(4),t.Oqu(o.isEditMode?"Update a Task":"Create a Task"),t.xp6(50),t.Q6J("disabled",i.invalid),t.xp6(1),t.hij(" ",o.isEditMode?"Update Task":"Create Task"," ")}},dependencies:[n._Y,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.JL,n.Q7,n.On,n.F],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.7)}.popup[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:5px;right:15px;transition:all .2s;font-size:35px;font-weight:700;text-decoration:none;color:#000}.container[_ngcontent-%COMP%]{position:relative;max-width:700px;width:90%;background:#fff;padding:25px;border-radius:8px;box-shadow:0 0 15px #0000001a}"]})}return r})(),M=(()=>{class r{constructor(){this.CloseDetailView=new t.vpe}OnCloseTaskDetail(){this.CloseDetailView.emit(!1)}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-task-details"]],inputs:{task:"task"},outputs:{CloseDetailView:"CloseDetailView"},decls:30,vars:3,consts:[[1,"overlay"],[1,"popup","mt-5"],[1,"container"],[1,"close",3,"click"],[1,"mb-3"],[1,"row"],[1,"col-md-6","mb-3"]],template:function(s,o){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"section",2)(3,"h2"),t._uU(4),t.qZA(),t._UZ(5,"hr"),t.TgZ(6,"a",3),t.NdJ("click",function(){return o.OnCloseTaskDetail()}),t._uU(7,"\xd7"),t.qZA(),t.TgZ(8,"div",4)(9,"h6"),t._uU(10,"Description:"),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.qZA()(),t.TgZ(13,"div",5)(14,"div",6)(15,"strong"),t._uU(16,"Assigned To: "),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"div",6)(19,"strong"),t._uU(20,"Created At: "),t.qZA(),t._uU(21," 20-10-2023 "),t.qZA(),t.TgZ(22,"div",6)(23,"strong"),t._uU(24,"Priority: "),t.qZA(),t._uU(25," High "),t.qZA(),t.TgZ(26,"div",6)(27,"strong"),t._uU(28,"Current Status: "),t.qZA(),t._uU(29," In Progress "),t.qZA()()()()()),2&s&&(t.xp6(4),t.Oqu(o.task.title),t.xp6(8),t.Oqu(o.task.description),t.xp6(5),t.hij(" ",o.task.assignedTo," "))},styles:[".overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.7)}.popup[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:5px;right:15px;transition:all .2s;font-size:35px;font-weight:700;text-decoration:none;color:#000}.container[_ngcontent-%COMP%]{position:relative;max-width:700px;width:90%;background:#fff;padding:25px;border-radius:8px;box-shadow:0 0 15px #0000001a}"]})}return r})();function w(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"app-create-task",12),t.NdJ("CloseForm",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.CloseCreateTaskForm())})("EmitTaskData",function(o){t.CHM(e);const i=t.oxw();return t.KtG(i.CreateOrUpdateTask(o))}),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("isEditMode",e.editMode)("selectedTask",e.selectedTask)}}function O(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"app-task-details",13),t.NdJ("CloseDetailView",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.CloseTaskDetails())}),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("task",e.taskToShow)}}function U(r,l){if(1&r&&t._UZ(0,"app-snackbar",14),2&r){const e=t.oxw();t.Q6J("errorMessage",e.errorMessage)}}function q(r,l){1&r&&t._UZ(0,"app-loader",15)}function D(r,l){1&r&&(t.TgZ(0,"div")(1,"h3",16),t._uU(2,"No task...Please create a task!"),t.qZA()())}function y(r,l){if(1&r){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"h3"),t._uU(4),t.qZA()(),t.TgZ(5,"p",20)(6,"b"),t._uU(7,"Assigned to: "),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p",20)(10,"b"),t._uU(11,"Priority: "),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p",20)(14,"b"),t._uU(15,"Status: "),t.qZA(),t._uU(16),t.qZA(),t.TgZ(17,"div",21)(18,"button",22),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.ShowCurrentTaskDetails(i.id))}),t._UZ(19,"i",23),t.qZA(),t.TgZ(20,"button",24),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.OnEditTaskClicked(i.id))}),t._UZ(21,"i",25),t.qZA(),t.TgZ(22,"button",26),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.DeleteTask(i.id))}),t._UZ(23,"i",27),t.qZA()()()()}if(2&r){const e=l.$implicit;t.Q6J("ngClass","border-"+e.priority),t.xp6(4),t.Oqu(e.title),t.xp6(4),t.Oqu(e.assignedTo),t.xp6(4),t.Oqu(e.priority),t.xp6(4),t.Oqu(e.status)}}let S=(()=>{class r{constructor(){this.showCreateTaskForm=!1,this.http=(0,t.f3M)(h.eN),this.allTasks=[],this.taskService=(0,t.f3M)(v),this.isLoading=!1,this.errorMessage=null,this.showTaskDetails=!1,this.editMode=!1}ngOnInit(){this.fetechAllTask(),this.updatedTasksSub=this.taskService.taskUpdated.subscribe(()=>{this.fetechAllTask()}),this.errorSub=this.taskService.errorSubject.subscribe({next:e=>{this.setErrorMessage(e)}})}ngOnDestroy(){this.updatedTasksSub.unsubscribe(),this.errorSub.unsubscribe()}OpenCreateTaskForm(){this.showCreateTaskForm=!0,this.editMode=!1,this.selectedTask={title:"",description:"",assignedTo:"",createdAt:"",priority:"",status:""}}OnEditTaskClicked(e){this.currentTaskId=e,this.showCreateTaskForm=!0,this.editMode=!0,this.selectedTask=this.allTasks.find(s=>s.id==e)}CloseCreateTaskForm(){this.showCreateTaskForm=!1}ShowCurrentTaskDetails(e){this.showTaskDetails=!0;const s=this.allTasks.find(o=>o.id==e);this.taskToShow=s}CloseTaskDetails(){this.showTaskDetails=!1}CreateOrUpdateTask(e){this.editMode?this.taskService.UpdateTask(this.currentTaskId,e):this.taskService.CreateTask(e)}fetechAllTask(){this.isLoading=!0,this.taskService.GetAllTasks().subscribe({next:e=>{this.allTasks=e,this.isLoading=!1},error:e=>{this.setErrorMessage(e),this.isLoading=!1}})}setErrorMessage(e){this.errorMessage="Permission denied"==e.error.error?"You do not have permission":e.error.error,setTimeout(()=>{this.errorMessage=null},3e3)}DeleteTask(e){this.taskService.DeleteTask(e)}DeleteAllTask(){this.taskService.DeleteAllTasks()}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-overview"]],decls:16,vars:6,consts:[[3,"isEditMode","selectedTask","CloseForm","EmitTaskData",4,"ngIf"],[3,"task","CloseDetailView",4,"ngIf"],[1,"p-3"],[3,"errorMessage",4,"ngIf"],[1,"d-md-flex","justify-content-between","border-bottom","pb-2"],[1,"mb-2","mb-lg-0"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary","ml-3",3,"click"],[1,"mt-4","dashboard","d-flex","flex-wrap","justify-content-center","justify-content-md-start"],["class","spinner-wraper",4,"ngIf"],[4,"ngIf"],["class","card mx-3 my-4","style","width: 18rem",3,"ngClass",4,"ngFor","ngForOf"],[3,"isEditMode","selectedTask","CloseForm","EmitTaskData"],[3,"task","CloseDetailView"],[3,"errorMessage"],[1,"spinner-wraper"],[1,"text-muted"],[1,"card","mx-3","my-4",2,"width","18rem",3,"ngClass"],[1,"card-body"],[1,"task-title","border-bottom","mb-4"],[1,"mb-"],[1,"d-flex","justify-content-end","card-icons","mt-4"],["title","Detail",1,"p-2",3,"click"],["aria-hidden","true",1,"fa","fa-info-circle"],["title","Edit",1,"p-1","mx-1",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o","text-dark"],["title","Delete",1,"p-2",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-dark"]],template:function(s,o){1&s&&(t.YNc(0,w,1,2,"app-create-task",0),t.YNc(1,O,1,1,"app-task-details",1),t.TgZ(2,"div",2),t.YNc(3,U,1,1,"app-snackbar",3),t.TgZ(4,"div",4)(5,"h2",5),t._uU(6,"Dashboard"),t.qZA(),t.TgZ(7,"div")(8,"button",6),t.NdJ("click",function(){return o.OpenCreateTaskForm()}),t._uU(9," Create Task "),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return o.DeleteAllTask()}),t._uU(11," Clear Tasks "),t.qZA()()(),t.TgZ(12,"div",8),t.YNc(13,q,1,0,"app-loader",9),t.YNc(14,D,3,0,"div",10),t.YNc(15,y,24,5,"div",11),t.qZA()()),2&s&&(t.Q6J("ngIf",o.showCreateTaskForm),t.xp6(1),t.Q6J("ngIf",o.showTaskDetails),t.xp6(2),t.Q6J("ngIf",o.errorMessage),t.xp6(10),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.allTasks.length<=0&&!o.isLoading),t.xp6(1),t.Q6J("ngForOf",o.allTasks))},dependencies:[u.mk,u.sg,u.O5,C.R,Z.h,A,M],styles:[".card-icons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:none}.card-icons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem;cursor:pointer}.card[_ngcontent-%COMP%]{position:initial!important}.card.border-low[_ngcontent-%COMP%]{border-top:5px solid rgb(255,220,67)}.card.border-medium[_ngcontent-%COMP%]{border-top:5px solid rgb(27,183,255)}.card.border-high[_ngcontent-%COMP%]{border-top:5px solid rgb(9,186,0)}.card.border-critical[_ngcontent-%COMP%]{border-top:5px solid rgb(255,0,0)}.spinner-wraper[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.snack-bar[_ngcontent-%COMP%]{position:absolute;top:1rem;left:50%;transform:translate(-50%)}"]})}return r})(),F=(()=>{class r{constructor(){this.inprogress=0,this.open=0,this.started=0,this.closed=0,this.total=0,this.taskService=(0,t.f3M)(v)}ngOnInit(){this.taskService.GetAllTasks().subscribe(e=>{this.total=e.length,this.open=e.filter(s=>"open"===s.status).length,this.started=e.filter(s=>"started"===s.status).length,this.inprogress=e.filter(s=>"in-progress"===s.status).length,this.closed=e.filter(s=>"closed"===s.status).length})}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-stats"]],decls:42,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"status-content"]],template:function(s,o){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),t._uU(5,"Task Status & Percentage"),t.qZA(),t.TgZ(6,"table")(7,"thead")(8,"td"),t._uU(9,"Status"),t.qZA(),t.TgZ(10,"td"),t._uU(11,"Count"),t.qZA(),t.TgZ(12,"td"),t._uU(13,"Percentage"),t.qZA()(),t.TgZ(14,"tr")(15,"td"),t._uU(16,"Open"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.qZA()(),t.TgZ(21,"tr")(22,"td"),t._uU(23,"Started"),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA()(),t.TgZ(28,"tr")(29,"td"),t._uU(30,"In Progress"),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.qZA(),t.TgZ(33,"td"),t._uU(34),t.qZA()(),t.TgZ(35,"tr")(36,"td"),t._uU(37,"Closed"),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.qZA(),t.TgZ(40,"td"),t._uU(41),t.qZA()()()()()()()),2&s&&(t.xp6(18),t.Oqu(o.open),t.xp6(2),t.hij("",(o.open/o.total*100).toFixed(2)," %"),t.xp6(5),t.Oqu(o.started),t.xp6(2),t.hij("",(o.started/o.total*100).toFixed(2)," %"),t.xp6(5),t.Oqu(o.inprogress),t.xp6(2),t.hij("",(o.inprogress/o.total*100).toFixed(2)," %"),t.xp6(5),t.Oqu(o.closed),t.xp6(2),t.hij("",(o.closed/o.total*100).toFixed(2)," %"))},styles:[".status-content[_ngcontent-%COMP%]{border:#fff 1px solid;margin-top:5rem}thead[_ngcontent-%COMP%]{font-weight:700}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:#cdcdcd 1px solid}td[_ngcontent-%COMP%]{padding:5px 10px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}"]})}return r})();var P=a(8180);const E=[{path:"",canActivate:[(r,l)=>{const e=(0,t.f3M)(k.e),s=(0,t.f3M)(g.F0);return e.user.pipe((0,P.q)(1),(0,_.U)(o=>!!o||s.createUrlTree(["/login"])))}],children:[{path:"overview",component:S},{path:"stats",component:F}]}];let j=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#s=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(E),g.Bz]})}return r})(),J=(()=>{class r{static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275mod=t.oAB({type:r});static#s=this.\u0275inj=t.cJS({imports:[u.ez,f.m,g.Bz,f.m,j]})}return r})()}}]);